## AWS Snow Family

 **오프라인 데이터 전송 및 엣지 컴퓨팅**을 위한 **휴대용 장치**이다. (진짜 장치임)

![[Pasted image 20250510215252.png]]

## 사용 이유: 온라인 전송 한계

- 네트워크 속도에 따라 대용량 데이터 전송은 **수 일이 소요**
- 예시 (1Gbps 속도 기준):
    - 100TB → **12일**
    - 1PB → **120일 이상**
- 대역폭 비용, 연결 불안정, 보안 이슈 시 사용 권장

## 데이터 마이그레이션 과정

1. AWS 콘솔에서 장치 주문
2. **Snow Family 장치 수령**
3. **OpsHub or Snowball Client** 설치 후 파일 복사
4. 장치 반송
5. AWS가 **S3 버킷에 데이터 업로드**
6. 데이터 업로드 후 장치는 **완전 초기화**

## 엣지 컴퓨팅 (Edge Computing)

- 인터넷 연결이 제한된 현장 (트럭, 선박, 광산 등)에서 데이터 생성 및 처리
- AWS Snow 장치 위에서 직접 **EC2, Lambda 실행 가능**

### 엣지 컴퓨팅 사용 사례

- 생성된 데이터 **사전 처리**
- **머신러닝 모델 실행**
- 미디어 **트랜스코딩** 후 AWS 업로드

## Snow Family 종류

| 장치                | 용량       | 특징             | 사용 사례                      |
| ----------------- | -------- | -------------- | -------------------------- |
| **Snowcone**      | 8~14TB   | 소형, 낮은 CPU/메모리 | 소규모 마이그레이션, 간단한 엣지 컴퓨팅     |
| **Snowball Edge** | 80~210TB | 고성능 컴퓨팅 가능     | 대용량 마이그레이션, 엣지 AI, 트랜스코딩 등 |

> ❗ Snowball Edge는 `Storage Optimized`, `Compute Optimized` 등 유형 구분 가능


## ❄️ Snowball과 Amazon Glacier 전송 관련 시험 포인트

### ✅ 질문

> **Snowball을 통해 데이터를 직접 Glacier로 보낼 수 있을까?**

### ❌ 직접 전송 불가

- **Snowball은 Glacier로 직접 데이터 업로드 불가능**

### ✅ 우회 방법

1. **Snowball** → Amazon **S3**로 데이터 업로드
2. **S3 수명 주기 정책(Lifecycle Policy)** 설정
3. 일정 조건에 따라 **Glacier(또는 Glacier Deep Archive)** 로 자동 전환

---

# Amazon FSx

- AWS에서 **타사 고성능 파일 시스템을 완전 관리형으로 제공**하는 서비스
- 익숙한 시스템을 AWS 내에서 쉽게 운영 가능

### ✅ 시험에 자주 나오는 4종

1. FSx for **Windows File Server**
2. FSx for **Lustre**
3. FSx for **NetApp ONTAP**
4. FSx for **OpenZFS**

## 1. FSx for Windows File Server

| 항목      | 내용                                      |
| ------- | --------------------------------------- |
| OS 기반   | Windows                                 |
| 프로토콜    | SMB, NTFS                               |
| 인증 연동   | Active Directory (AD), ACL 지원           |
| 호환성     | Windows뿐만 아니라 **Linux EC2**에서도 마운트 가능   |
| 기능      | DFS 그룹화, 사용자 할당량, 다중 AZ 지원              |
| 스토리지 옵션 | **SSD**(저지연 작업용), **HDD**(홈디렉토리, CMS 등) |
| 백업      | **Amazon S3에 매일 백업**                    |
| 사용 사례   | 기존 Windows 파일 서버와 연동, 온프레미스 대체          |

## 2. FSx for Lustre

| 항목      | 내용                                      |
| ------- | --------------------------------------- |
| 용도      | HPC, ML, 대용량 병렬처리                       |
| 프로토콜    | POSIX                                   |
| 통합      | **Amazon S3와 양방향 연동** (중요!)             |
| 성능      | 수백 GB/s, 수백만 IOPS, <1ms 지연              |
| 스토리지 옵션 | **SSD**(무작위 소파일 작업), **HDD**(대용량 연속 작업) |
| 배포 방식   | `스크래치` (고성능, 비복제), `영구` (복제, 안정성)       |
| 사용 사례   | 미디어 처리, 전자설계, 금융모델링, 엣지 연산              |

### 스크래치 vs 영구 파일 시스템

| 항목    | 스크래치      | 영구           |
| ----- | --------- | ------------ |
| 복제    | ❌ 없음      | ✅ 동일 AZ 내 복제 |
| 사용 사례 | 일시적 처리    | 민감한 장기 데이터   |
| 성능    | 더 높음 (6배) | 안정성 중시       |
| 복구    | 불가        | 수분 내 자동 복구   |

---

## 3. FSx for NetApp ONTAP

|항목|내용|
|---|---|
|프로토콜|NFS, SMB, iSCSI|
|사용 대상|기존 NetApp ONTAP → AWS 이전|
|호환 OS|Linux, Windows, macOS, VMware, ECS, EKS 등|
|기능|스냅샷, 자동 확장/축소, 압축, **중복 제거**|
|추가 기능|**지정 시간 복제** (스테이징, 테스트에 유용)|
|사용 사례|NAS 대체, 테스트 환경 복제, 비용 최적화|

## 4. FSx for OpenZFS

|항목|내용|
|---|---|
|기반|OpenZFS|
|프로토콜|NFS (v3, v4 등)|
|성능|100만 IOPS, 0.5ms 미만 지연|
|호환 OS|Linux, macOS, Windows|
|기능|스냅샷, 압축, **지정 시간 복제** (❌ 중복 제거 없음)|
|사용 사례|기존 ZFS 워크로드 마이그레이션, 테스트용 복제 환경|

## 중요 키워드

| 파일 시스템              | 특징 요약                       | 키워드                 |
| ------------------- | --------------------------- | ------------------- |
| Windows File Server | AD 통합, SMB/NTFS, 다중 AZ      | **Windows 공유 드라이브** |
| Lustre              | HPC/ML, S3 연동, 초고속, 스크래치/영구 | **병렬처리 / 대용량**      |
| NetApp ONTAP        | 다중 프로토콜, 자동 스케일링, 중복 제거     | **기존 NAS 마이그레이션**   |
| OpenZFS             | NFS 기반, 고성능, 지정 시간 복제       | **ZFS 기반 고성능 워크로드** |

---

# AWS 하이브리드 클라우드 전략

일부 워크로드는 **AWS 클라우드**, 일부는 **온프레미스**에 두는 방식이다.
- 이유:
    - **규정 준수**, **보안**, **마이그레이션 지연**
    - **탄력적 워크로드**만 클라우드로 이전하는 전략

## AWS Storage Gateway
![[Pasted image 20250510223226.png]]

- 온프레미스와 AWS 클라우드 간 **스토리지 연동을 위한 가교**
- **백업**, **아카이브**, **스토리지 확장**, **로컬 캐시** 등 다양한 목적에 활용

### 활용 사례

- 온프레미스 → AWS **백업/복구**
- 온프레미스 데이터에 대한 **S3 연동 캐시 처리**
- 네트워크 제약 시 **오프라인 백업용 디바이스로도 활용 가능**

## Storage Gateway 유형

| 유형               | 주요 특징                                | 대상 스토리지                             |
| ---------------- | ------------------------------------ | ----------------------------------- |
| **S3 파일 게이트웨이**  | 온프레미스 앱에서 **NFS/SMB**로 S3 접근         | S3 (Glacier는 수명 주기 필요)              |
| **FSx 파일 게이트웨이** | FSx for Windows File Server에 SMB로 접근 | FSx (백업은 자동으로 S3)                   |
| **볼륨 게이트웨이**     | iSCSI 기반 블록 스토리지 연결                  | S3 (EBS 스냅샷)                        |
| **테이프 게이트웨이**    | 가상 테이프 라이브러리 (VTL), iSCSI 백업         | S3 → Glacier / Glacier Deep Archive |

## S3 파일 게이트웨이

- **NFS/SMB 프로토콜**로 온프레미스에서 S3 접근
- **파일 캐시**: 최근 액세스 파일을 로컬 보관해 지연 감소
- **지원 스토리지 클래스**:
    - Standard, IA, One Zone-IA, Intelligent-Tiering (※ Glacier는 ❌)
- **수명 주기 정책** 설정 시 S3 Glacier 이동 가능
- **SMB 사용 시**: Active Directory 인증 필요

## FSx 파일 게이트웨이

- FSx for Windows File Server를 온프레미스에서 **SMB로 직접 연결**
- 자주 사용하는 데이터는 **로컬 캐시에 저장**
- AD 연동, NTFS 지원
- 홈 디렉터리, 그룹 파일 공유 등에 유용

## 볼륨 게이트웨이

- **iSCSI 블록 디바이스 제공**
- Amazon S3에 데이터 백업, **EBS 스냅샷** 생성
- 2가지 모드:
    - **캐시 볼륨**: 데이터는 S3에, 일부는 로컬에 캐시
    - **스토어 볼륨**: 전체 데이터 온프레미스 + S3 주기 백업

## 테이프 게이트웨이 (VTL)

- **iSCSI 기반 가상 테이프** 인터페이스 제공
- S3를 **가상 테이프 라이브러리**로 사용
- 이후 **Glacier / Deep Archive**로 아카이빙 가능
- 기존 테이프 기반 백업 소프트웨어와 호환

## 📝 요약 비교

| 항목           | 프로토콜        | 대상 스토리지           | 캐시    | AD 연동  | 스냅샷             |
| ------------ | ----------- | ----------------- | ----- | ------ | --------------- |
| S3 파일 게이트웨이  | NFS/SMB     | S3                | O     | O(SMB) | ❌               |
| FSx 파일 게이트웨이 | SMB         | FSx for Windows   | O     | O      | O(S3 백업)        |
| 볼륨 게이트웨이     | iSCSI       | S3 (EBS Snapshot) | 캐시/전체 | ❌      | ✅               |
| 테이프 게이트웨이    | iSCSI (VTL) | S3 → Glacier      | ❌     | ❌      | ✅ (Tape Backup) |

---
# AWS Transfer Family

![[Pasted image 20250510223316.png]]
- **FTP/SFTP/FTPS** 프로토콜을 사용하여 **Amazon S3 또는 EFS와 통신**할 수 있도록 하는 서비스
- S3 API나 NFS 대신 **파일 전송 프로토콜을 선호하는 경우에 적합**
- 완전 관리형, **확장 가능하고 안정적인 서비스**

## 지원 프로토콜

| 프로토콜     | 암호화 | 설명                        |
| -------- | --- | ------------------------- |
| **FTP**  | ❌   | 암호화 없음, 기본 파일 전송          |
| **FTPS** | ✅   | FTP + SSL/TLS, 암호화된 파일 전송 |
| **SFTP** | ✅   | SSH 기반 보안 파일 전송           |

> 시험 포인트: **FTP는 암호화되지 않음**, FTPS/SFTP는 전송 중 암호화됨

## 작동 구조

1. 사용자는 **FTP 엔드포인트**로 접속
2. 필요 시 **Route 53**으로 사용자 지정 도메인 연결
3. **IAM 역할**을 통해 S3 또는 EFS에 읽기/쓰기 권한 부여
4. 내부 또는 외부 **인증 시스템**을 통해 사용자 인증

## 인증 방식

- **AWS 내부 사용자 관리**
- 외부 인증 시스템 통합: **Microsoft Active Directory**, **LDAP** 등등..

## 사용 사례

- **S3/EFS의 FTP 인터페이스** 제공
- **기존 FTP 클라이언트를 통한 데이터 송수신**
- **파일 공유**, **공개 데이터셋 제공**
- **ERP/CRM 시스템 통합** 등

## 요금 구조

| 항목            | 설명                 |
| ------------- | ------------------ |
| **엔드포인트 비용**  | 시간당 요금             |
| **전송 데이터 비용** | GB당 청구 (업/다운로드 포함) |

## 📌 요약 정리

| 항목      | 설명                            |
| ------- | ----------------------------- |
| 목적      | FTP 프로토콜로 S3/EFS에 접근          |
| 지원 프로토콜 | FTP / FTPS / SFTP             |
| 대상 스토리지 | Amazon S3, Amazon EFS         |
| 사용자 인증  | AWS 내부 or 외부 인증 시스템 연동        |
| 접속 방식   | 고정 엔드포인트, Route 53로 도메인 연결 가능 |

---

# AWS DataSync

![[Pasted image 20250510223346.png]]
- **온프레미스 ↔ AWS 간**, 또는 **AWS 서비스 간** 데이터를 **동기화**하는 서비스
- 대용량 데이터 전송을 자동화하고 **메타데이터와 권한까지 유지**

## 지원 대상

| 원본 / 대상         | 설명                                                   |
| --------------- | ---------------------------------------------------- |
| **온프레미스**       | NFS, SMB, HDFS 등                                     |
| **AWS 스토리지**    | S3 (Glacier 포함), EFS, FSx (Windows, Lustre, ONTAP 등) |
| **타 클라우드**      | 에이전트 설치 후 연결 가능                                      |
| **AWS 내부 간 이동** | S3 ↔ EFS, FSx 등 스토리지 서비스 간 이동도 지원                    |

## 메타데이터 & 보안

- **파일 권한 및 소유권** 유지 (POSIX/NFS, SMB 권한 보존)
- **암호화 전송 지원**
- **VPC 엔드포인트**, **인터넷**, **VPN** 경로 사용 가능

## 동기화 방식

- **실시간 지속 동기화는 아님**
- 설정된 **일정 기반** 실행 (시간/일/주 단위)
- 반복 실행 자동화 가능 (예: 매일 02:00)

## 에이전트

- **온프레미스나 다른 클라우드**에서 DataSync 사용 시 설치 필요
- **1개 태스크당 최대 10Gbps 처리**
- 대역폭 제한 설정 가능

### 에이전트 위치

| 상황           | 에이전트 필요 여부 |
| ------------ | ---------- |
| 온프레미스 → AWS  | ✅ 필요       |
| AWS 서비스 간    | ❌ 불필요      |
| 타 클라우드 → AWS | ✅ 필요       |
| Snowcone에서   | ✅ 내장되어 있음  |

## Snowcone + DataSync

- **인터넷 연결이 어려운 환경**에서 유용
- Snowcone에 내장된 에이전트를 활용해 **로컬 데이터 → AWS 업로드**
- **DataSync + Snow Family** 조합은 시험에서도 출제 가능성 높음

## 요약

- **DataSync는 실시간이 아님** (정기 스케줄 기반 동기화)
- **에이전트가 필요한 경우/필요 없는 경우** 구분
- **메타데이터 보존 여부**: O
- **AWS 내부 스토리지 간 복사 가능 여부**: O
- **Snowcone과 연계 사용 가능**: O
