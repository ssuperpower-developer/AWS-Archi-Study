## EBS 볼륨이란?

EC2에 연결하는 네트워크 기반의 USB라고 생각하면 된다. 네트워크로 연결되니 지연이 있고, 인스턴스가 종료되어도 데이터가 유지된다. USB처럼 연결(Attach)과 분리(Detach)가 자유롭다.

## 연결

컴퓨터(EC2)와 USB(EBS)의 관계를 생각하면 편하다.

![[Pasted image 20250430221331.png]]

- **하나의 EBS는 하나의 인스턴스에만 연결 가능**
- **둘의 availability Zone이 다르면 연결 불가
	- `us-east-1a`에서 생성된 EBS는 `us-east-1b`와 연결 불가
	- 단, 스냅샷 활용시 이동 가능
- **EBS는 인스턴스 없이도 존재 가능**
- **하나의 인스턴스에 여러개의 EBS를 동시에 연결 가능**

## 활용
- **인스턴스 재생성 후에도 데이터 유지**
- **빠르게 다른 인스턴스에 재마운트 가능**
- **백업 및 복원용으로 스냅샷 기능 활용 가능**

## 요금
아래 요소에 따라 요금이 결정되며, 나중에 조정이 가능
- 용량 (GB)
- IOPS (Input/Output Operations per Second)

## 종료 시 삭제 옵션
EC2 인스턴스를 생성하면서 EBS를 생성하면 종료 시 삭제(Delete on Termination)` 옵션이 있다. 디폴트 값은 아래와 같지만, 생성시에 옵션을 변경할 수 있다.
- **루트 볼륨**: 기본으로 체크되어 있어 인스턴스 종료 시 삭제됨
- **추가 볼륨**: 기본으로 비활성화되어 삭제되지 않음

## EBS Snapshot

EBS 스냅샷은 **EBS 볼륨의 백업본**이다. 볼륨의 특정 시점을 사진찍듯이 백업본으로 만들고, 그 백업본을 다시 볼륨으로 복구할 수도 있다.

## 연결 & 복원
스냅샷은 **다른 가용 영역 혹은 리전으로 복사 가능**
- 예: `us-east-1a`의 EBS → 스냅샷 생성 → `us-east-1b`에서 볼륨으로 복원

## 스냅샷을 어디에 보관 할 것인가?

디폴트는 Standard Tier에 보관된다. 하지만 아래와 같이 3가지 옵션을 더 선택할 수 있다.
1. 아카이브 티어
2. 휴지통
3. FSR(Fast Snapshot Restore)

### 🧊 아카이브 티어 (Archive Tier)
- **최대 75% 저렴한 비용**으로 저장가능. 단, **복원까지 24~72시간 소요**
- **즉시 복원이 필요 없는 장기 보관용**에 적합
- 다른 클라우드에서 콜드 스토리지라고 부르는 그것!

### 🗑 휴지통 (Recycle Bin)
- 실수로 삭제한 스냅샷을 **일정 기간 복원 가능**
- **보관 기간 설정 가능**: 1일 ~ 1년
- 기본 삭제 → 휴지통 이동 → 복원 가능

### ⚡ FSR(Fast Snapshot Restore)
- **볼륨으로 복원하는데 필요한 시간을 줄이기 위해 미리 준비된 스냅샷**
- 성능은 뛰어나나 **비용이 높으므로 신중히 사용**


## AMI(Amazon Machine Image)란?

EC2 인스턴스를 기반으로 만든 **머신 이미지**다. EBS Snapshot 처럼 볼륨의 데이터 백업하는게 아닌, 루트 EBS 볼륨과 추가 볼륨을 모두 포함해서 OS, 설정 등 EC2 인스턴스를 통째로 백업한다.

## AMI의 종류

| 종류                  | 설명                                   |
| ------------------- | ------------------------------------ |
| **Public AMI**      | AWS가 기본 제공하는 이미지 (예: Amazon Linux 2) |
| **Custom AMI**      | 사용자가 직접 구성한 이미지, 유지보수도 직접            |
| **Marketplace AMI** | 다른 사용자가 구성하여 판매하는 이미지, 시간 절약 가능      |

## 장점

- **커스터마이징 가능**
	- 원하는 소프트웨어, 설정 파일, 운영체제, 모니터링 툴 등을 미리 포함 가능
- **글로벌 인프라 활용**
	- AMI를 한 리전에 만든 뒤 **다른 리전으로 복사 가능**
- **EC2 인스턴스 실행 시 활용**
	- 기존 EC2를 중지 후, 이를 기반으로 AMI 생성 → 다른 AZ에서 복제 실행 가능

## AMI 생성 절차

1. EC2 인스턴스를 원하는 대로 설정
2. 인스턴스를 **중지(stop)** (데이터 무결성 확보)
3. 해당 인스턴스로부터 **AMI 생성**
4. AMI를 활용해 **다른 가용영역(AZ)이나 리전에서 인스턴스 실행**

## 예시 흐름

- `us-east-1a`에서 EC2 인스턴스 설정 → AMI 생성  
→ `us-east-1b`에서 이 AMI로 EC2 인스턴스 실행  
→ 기존 인스턴스의 **복사본 생성**

