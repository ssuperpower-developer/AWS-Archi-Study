## EBS 볼륨이란?

EC2에 연결하는 네트워크 기반의 USB라고 생각하면 된다. 네트워크로 연결되니 지연이 있고, 인스턴스가 종료되어도 데이터가 유지된다. USB처럼 연결(Attach)과 분리(Detach)가 자유롭다.

## 연결

컴퓨터(EC2)와 USB(EBS)의 관계를 생각하면 편하다.

![[Pasted image 20250430221331.png]]

- **하나의 EBS는 하나의 인스턴스에만 연결 가능**
- **둘의 availability Zone이 다르면 연결 불가
	- `us-east-1a`에서 생성된 EBS는 `us-east-1b`와 연결 불가
	- 단, 스냅샷 활용시 이동 가능
- **EBS는 인스턴스 없이도 존재 가능**
- **하나의 인스턴스에 여러개의 EBS를 동시에 연결 가능**

## 활용

- **인스턴스 재생성 후에도 데이터 유지**
- **빠르게 다른 인스턴스에 재마운트 가능**
- **백업 및 복원용으로 스냅샷 기능 활용 가능**

## 요금

아래 요소에 따라 요금이 결정되며, 나중에 조정이 가능
- 용량 (GB)
- IOPS (Input/Output Operations per Second)

## 종료 시 삭제 옵션

![[Pasted image 20250501185228.png]]

EC2 인스턴스를 생성하면서 EBS를 생성하면 종료 시 삭제(Delete on Termination) 옵션이 있다. 디폴트 값은 아래와 같지만, 생성시에 옵션을 변경할 수 있다.
- **루트 볼륨**: 기본으로 체크되어 있어 인스턴스 종료 시 삭제됨
- **추가 볼륨**: 기본으로 비활성화되어 삭제되지 않음

---

# EBS Snapshot

EBS 스냅샷은 **EBS 볼륨의 백업본**이다. 볼륨의 특정 시점을 사진찍듯이 백업본으로 만들고, 그 백업본을 다시 볼륨으로 복구할 수도 있다.

## 연결 & 복원

![[Pasted image 20250501174300.png]]

스냅샷은 **다른 가용 영역 혹은 리전으로 복사 가능**
- 예: `us-east-1a`의 EBS → 스냅샷 생성 → `us-east-1b`에서 볼륨으로 복원

## 스냅샷을 어디에 보관 할 것인가?

디폴트는 Standard Tier에 보관된다. 하지만 아래와 같이 3가지 옵션을 더 선택할 수 있다.
1. 아카이브 티어
2. 휴지통
3. FSR(Fast Snapshot Restore)

### 아카이브 티어 (Archive Tier)
- **최대 75% 저렴한 비용**으로 저장가능. 단, **복원까지 24~72시간 소요**
- **즉시 복원이 필요 없는 장기 보관용**에 적합
- 다른 클라우드에서 콜드 스토리지라고 부르는 그것!

### 휴지통 (Recycle Bin)
- 실수로 삭제한 스냅샷을 **일정 기간 복원 가능**
- **보관 기간 설정 가능**: 1일 ~ 1년
- 기본 삭제 → 휴지통 이동 → 복원 가능

### FSR(Fast Snapshot Restore)
- **볼륨으로 복원하는데 필요한 시간을 줄이기 위해 미리 준비된 스냅샷**
- 성능은 뛰어나나 **비용이 높으므로 신중히 사용**

![[Pasted image 20250501185405.png]]

---

# EBS 볼륨 유형

EBS에는 현재 **6가지 볼륨 유형**이 있다. 아래 나오는 정보들의 **숫자는 중요하지 않습니다.** 대략적인 특징과 비교가 가능하면 됩니다.

## SSD 볼륨

### GP3
- **범용 SSD (최신 세대)**
- **IOPS와 Throughput을 독립적으로 설정 가능**
  - 기본: 3,000 IOPS / 125MB/s
  - 최대: 16,000 IOPS / 1,000MB/s
- **GP2 대비 성능과 가격 효율성 모두 우수**
- **시험에서 중요**

### GP2
- **범용 SSD (이전 세대)**
- **IOPS와 용량이 비례** (1GB당 3IOPS, 최대 16,000 IOPS)
- 최대 16TB까지 가능
- **버스트 성능** 제공 (작은 볼륨일 경우)
- 저비용 & 낮은 지연시간 → **테스트/개발, 부팅 볼륨 등에 적합**

### io1 /  io2 Block Express
- **고성능 SSD 볼륨**
- 일관된 IOPS가 필요한 **데이터베이스용**
- **스토리지와 IOPS 비례하지 않음 → 별도 설정 가능**
-> 비싸고 성능이 좋음

## HDD 계열 볼륨

### ST1 (Throughput Optimized HDD)
- **빅데이터, 로그 처리, 데이터 웨어하우스에 적합**
- 처리량 최적화 → 최대 500MB/s, 최대 500 IOPS
- **부팅 볼륨 불가**
- 최대 16TB

### SC1 (Cold HDD)
- **자주 접근하지 않는 데이터 (아카이브)에 적합**
- 초저가 스토리지
- 최대 250MB/s, 최대 250 IOPS
- **부팅 볼륨 불가**

## 부팅 볼륨으로 사용 가능한 유형

- GP2, GP3, io1, io2 ✅
- ST1 / SC1 ❌
**-> SSD 계열만 부팅 볼륨으로 활용할 수 있다!**

---

# EBS Multi-Attach

마치 초등학교 때 처럼.. EBS는 하나의 EC2에만 연결 된다고 했지만, 짜잔~ 사실은 여러개의 인스턴스에 연결할 수 있는 EBS도 있답니다!

- 이 기능은 **io1과 io2** 제품군에서만 사용 가능하며, 동일한 **Availability Zone** 내에서만 작동.
- 여러 인스턴스가 하나의 EBS 볼륨에 **동시에 읽고 쓸 수 있다**.

### 제한 사항

- 연결 가능한 EC2 인스턴스의 수는 **최대 16개**로 제한. (중요!!)
- **다른 Availability Zone 간의 연결 불가. (예: `us-east-1a`에서 `us-east-1b`로 연결 불가)
- **클러스터 인식 파일 시스템**만 지원.

### 사용 사례

- **애플리케이션 가용성**을 높이기 위해 사용.
- **동시 쓰기 작업을 관리해야 하는 애플리케이션**에 유용.
- **Teradata와 같은 클러스터링된 Linux 애플리케이션**에서 활용 가능.

---

## EBS 볼륨 암호화

- **저장 데이터**와 **인스턴스와 볼륨 간의 전송 데이터**가 자동으로 암호화됨.
- **스냅샷**과 **스냅샷으로 생성한 볼륨**도 자동으로 암호화됨.
- 암호화 및 복호화 과정은 백그라운드에서 자동으로 처리되며, 사용자는 아무것도 하지 않음.
	- 볼륨이나 스냅샷 생성시에 `Encrypt` 옵션만 체크
- 암호화에는 **AES-256** 표준을 사용하며, **KMS(Key Management Service)**에서 암호화 키가 관리됨.

### 장점

- **지연 시간**에 미치는 영향은 거의 없으며, 백그라운드에서 암호화 및 복호화가 이루어짐.
- **KMS**에서 암호화 키를 생성하고 관리하여 **AES-256** 표준을 사용한 강력한 암호화 지원.

### 스냅샷을 만들때는?

- 암호화 된 스냅샷 -> 암호화 된 볼륨 생성
- 암호화 된 볼륨 -> 암호화 된 스냅샷 생성

그래서 이런 흐름도 가능합니다.
1. 암호화 되지 않은 볼륨 생성
2. 볼륨으로 암호화 되지 않은 스냅샷 생성
3. 스냅샷을 복사하면서 암호화 -> 암호화 된 스냅샷 생성
4. 암호화 된 스냅샷을 복원하면 암호화 된 볼륨이 됨.