
## S3 μ•”νΈν™” κ°μ”
4κ°€μ§€ λ°©λ²•

1. Server Side Encryption SSE
	1. SSE-S3 (SSE with Amazon S3 managed keys): λ²„ν‚·κ³Ό κ°μ²΄μ— λ€ν•΄μ„ κΈ°λ³Έκ°’μΌλ΅ ν™μ„±ν™” λμ–΄ μμ (λ””ν΄νΈ)
	2. SSE-KMS (SSE with KMS keys stored in AWS KMS): KMS ν‚¤λ¥Ό μ΄μ©ν•΄μ„ μ•”νΈν™” ν‚¤λ¥Ό κ΄€λ¦¬ 
	3. SSE-C(SSE with Customer-Providerd Keys): ν΄λΌμ΄μ–ΈνΈκ°€ μ κ³µν• ν‚¤λ¥Ό μ‚¬μ©. 
2. Client Side Encryption CSE
  
Amazon S3μ κ°μ²΄ μ•”νΈν™” λ°©μ‹μ€ ν¬κ² **μ„λ²„ μΈ΅ μ•”νΈν™”(SSE)** μ™€ **ν΄λΌμ΄μ–ΈνΈ μΈ΅ μ•”νΈν™”**λ΅ λ‚λ‰©λ‹λ‹¤.

---

### **1. μ„λ²„ μΈ΅ μ•”νΈν™” (SSE)**

Amazon S3κ°€ λ°μ΄ν„° μ—…λ΅λ“ μ‹ μλ™μΌλ΅ μ•”νΈν™”ν•κ³  μ €μ¥ν•©λ‹λ‹¤.

- **SSE-S3**
    - AWSκ°€ μ²λ¦¬ν•κ³  κ΄€λ¦¬ν•κ³  μ†μ ν• ν‚¤ μ‚¬μ©        
    - μ‚¬μ©μν•  μλ” μ—‘μ„Έμ¤ν•  μ μ—†μ 
    - κΈ°λ³Έκ°’μΌλ΅ ν™μ„±ν™”λ¨
    - ν—¤λ”: `"x-amz-server-side-encryption":"AES256"`
    - μ•”νΈν™” λ°©μ‹: AES-256
    - μƒλ΅μ΄ λ²„ν‚·κ³Ό μƒλ΅μ΄ κ°μ²΄μ— λ€ν•΄μ„ μ΄κ² λ””ν΄νΈμ„
    - μ‘λ™λ°©μ‹
	    1. μ € ν—¤λ”λ¥Ό λ‹¬κ³ μ„ νμΌμ„ μ—…λ΅λ“ν•λ©΄ s3κ°€ λ³΄μ ν• ν‚¤λ‘ object(μ¬λ¦° νμΌ)μ„ λ§¤ν•‘ν•¨.
	    2. ν‚¤λ‘ objectλ¥Ό νΌν•©ν•΄μ„ μ•”νΈν™”ν•¨. 
	    3. μ•”νΈν™”ν•κ² λ²„ν‚·μ— μ €μ¥λ¨
	    ![[μ¤ν¬λ¦°μƒ· 2025-05-10 μ¤ν›„ 5.00.17.png]]
        
- **SSE-KMS**
    - AWSμ™€ S3 μ„λΉ„μ¤κ°€ λ³΄μ ν• ν‚¤μ— μμ΅΄ν•μ§€ μ•μ
    - KMS μ„λΉ„μ¤(ν‚¤ κ΄€λ¦¬ μ„λΉ„μ¤)λ¥Ό μ΄μ©ν•΄μ„ μ‚¬μ©μκ°€ μ§μ ‘ μμ‹ μ ν‚¤λ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬
    - λ΅κ·Έλ” CloudTrailμ— κΈ°λ΅λ¨    
    - ν—¤λ”: `"x-amz-server-side-encryption":"aws:kms"`
    - λ‹¨μ : KMS API νΈμ¶ μ ν• μ΅΄μ¬
	- μ‘λ™λ°©μ‹
		1. κ°μ²΄ μ—…λ΅λ“ 
		2. ν—¤λ” `"x-amz-server-side-encryption":"aws:kms"` ν—¤λ” μ•μ—μ„ μ‚¬μ©ν•λ ¤λ” KMSν‚¤ μ§€μ • 
		3. Amazon S3μ— μλ” κ°μ²΄ + μ™Έλ¶€μ—μ„ μ¨(λ‚΄κ°€ μ¬λ¦°) KMSν‚¤ = λ‘κ°λ¥Ό νΌν•©ν•΄μ„ μ•”νΈν™” -> μ•”νΈν™”λ νμΌμ΄ S3 λ²„ν‚·μΌλ΅ κ° 
		4. νμΌμ„ μ½κΈ° μ„ν•΄μ„λ” κ°μ²΄μ— μ—‘μ„Έμ¤ + KMS ν‚¤μ—λ„ μ—‘μ„Έμ¤ ν•  μ μμ–΄μ•Όν•¨. (λ³΄μ• μμ¤€ κ°•ν™”)
			![[μ¤ν¬λ¦°μƒ· 2025-05-10 μ¤ν›„ 5.02.09.png]]
	
	- μ ν• μ‚¬ν•­ 
		- S3μ— νμΌ μ—…λ΅λ“/λ‹¤μ΄λ΅λ“μ‹μ— **KMS API**(μ: `GenerateDataKey`, `Decrypt`)λ¥Ό νΈμ¶ν•κ² λ©λ‹λ‹¤.
		- μ΄ **API νΈμ¶μ€ KMSμ μ΄λ‹Ή νΈμ¶ μ ν•(μΏΌν„°)**μ— ν¬ν•¨λ©λ‹λ‹¤.
		- **KMS μΏΌν„°λ” κΈ°λ³Έμ μΌλ΅ λ¦¬μ „λ§λ‹¤ μ΄λ‹Ή 5,000 ~ 30,000κ±΄** μμ¤€μ…λ‹λ‹¤.
		    - μ΄ μ ν•μ€ μ½μ†”μ—μ„ μ”μ²­ν•λ©΄ λλ¦΄ μ μμ.
		- κ·Έλ°λ° λ§μ•½ **S3 μ²λ¦¬λ‰μ΄ λ§¤μ° λ†’κ³ , λ¨λ“  νμΌμ΄ SSE-KMSλ΅ μ•”νΈν™”λμ–΄ μλ‹¤λ©΄**,
		    - **KMS μΏΌν„°λ¥Ό μ΄κ³Όν•΄μ„ μ”μ²­μ΄ μ¤λ΅ν‹€(throttle)** λ  μ μμµλ‹λ‹¤.
		    - μ¦‰, μ”μ²­μ΄ μ§€μ—°λκ±°λ‚ κ±°λ¶€λ  μ μμµλ‹λ‹¤.
		- μ΄κ±΄ **μ¤λ΅ν‹€λ§(throttling, μ ν•)**μ λ€ν‘μ μΈ μ‚¬λ΅€ μ¤‘ ν•λ‚μ…λ‹λ‹¤.
- **SSE-C**
    - μ‚¬μ©μκ°€ μ κ³µν• ν‚¤ μ‚¬μ©
    - ν‚¤λ” AWSμ— μ €μ¥λμ§€ μ•μ (μ „μ†΅ ν›„ νκΈ°λ¨)
    - ν‚¤λ¥Ό AWSμ— μ „μ†΅ν•κΈ° λ•λ¬Έμ— HTTPSλ΅ μ „μ†΅ ν•„μ
    - ν—¤λ”μ— ν‚¤λ¥Ό μ „λ‹¬
    - μ•”νΈν™”λ” μ„λ²„ μΈ΅μ—μ„ μν–‰λμ§€λ§ ν‚¤λ” μ§μ ‘ μ κ³µ
	![[μ¤ν¬λ¦°μƒ· 2025-05-10 μ¤ν›„ 5.03.46.png]]
### **2. ν΄λΌμ΄μ–ΈνΈ μΈ΅ μ•”νΈν™”**  CSE
- λΌμ΄λΈλ¬λ¦¬ μ“°λ©΄ μ‰½κ² ν•  μ μμ
- ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘ λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν• ν›„ S3μ— μ—…λ΅λ“
- λ³µνΈν™”λ„ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ§μ ‘ μν–‰
- μ•”νΈν™” ν‚¤ λ° μ‚¬μ΄ν΄ μ™„μ „ κ΄€λ¦¬ ν•„μ”
    ![[μ¤ν¬λ¦°μƒ· 2025-05-10 μ¤ν›„ 5.05.11.png]]

### **3. μ „μ†΅ μ¤‘ μ•”νΈν™” (SSL/TLS)
 S3 λ²„ν‚·μ— κΈ°λ³Έμ μΌλ΅ λ‘κ°€μ§€ μ—”λ“ν¬μΈνΈκ°€ μμ
- HTTP endpoint: μ•”νΈν™” x
- **HTTPS endpoint**: μ•”νΈν™” 0
	- s3μ— λ€ν• μ”μ²­μ„ ν• λ• μ‚¬μ©μ„ 100% κ¶μ¥
	- κ·Όλ° κ±°μ λ¨λ“  ν΄λΌμ΄μ–ΈνΈκ°€ HTTPS μ—”λ“ν¬μΈνΈλ¥Ό μ‚¬μ©ν•¨
- κ°•μ ν•  μ μλ” λ°©λ²•
	- λ²„ν‚· μ •μ±…μ„ ν†µν•΄ μ•”νΈν™”λμ§€ μ•μ€ μ „μ†΅(HTTP) μ°¨λ‹¨ / HTTPSλ§ ν—μ©ν•λ„λ΅ μ„¤μ •
    ```json
    "Condition": {
      "Bool": {
        "aws:SecureTransport": "false"
      }
    }
    ```
    
---
## DSSE-KMSμ— λ€ν• μ•λ‚΄

  X
```
λ‹¤μ κ°•μμ—μ„ μ‹¤μµμ„ ν•  λ•, μ΄μ λ¶€ν„°Β [2023λ…„ 6μ›”μ— μ¶μ‹](https://aws.amazon.com/blogs/aws/new-amazon-s3-dual-layer-server-side-encryption-with-keys-stored-in-aws-key-management-service-dsse-kms/)λ μƒλ΅μ΄ μ•”νΈν™” μµμ…μΈ DSSE-KMSλ¥Ό μ‚¬μ©ν•  μ μλ‹¤λ” κ²ƒμ„ μ•κ² λ  κ²ƒμ…λ‹λ‹¤.

  

**DSSE-KMSλ” "KMSλ¥Ό κΈ°λ°μΌλ΅ ν• μ΄μ¤‘ μ•”νΈν™”"μΌ λΏμ…λ‹λ‹¤.**

  

μ‹ν—μ— μ¶μ λμ§€ μ•λ” ν• μ΄ κ³Όμ •μ—μ„λ” κ°€λ¥΄μΉμ§€ μ•μ„ κ²ƒμ…λ‹λ‹¤.

μ‹ν—μ— μµμ…μΌλ΅ ν‘μ‹λλ” κ²½μ° μ•λ ¤μ£Όμ‹λ©΄ κ°•μΆλ¥Ό μ—…λ°μ΄νΈν•κ² μµλ‹λ‹¤.

  

μ¦κ±°μ΄ ν•™μµ λμ„Έμ”!
```
----
## S3 μ•”νΈν™” μ‹¤μµ

### 1.  λ²„ν‚· μƒμ„± λ° μ•”νΈν™” μ„¤μ •

- `demo-encryption-stephane-v2`λΌλ” S3 λ²„ν‚·μ„ μƒμ„±.
- λ²„ν‚· λ²„μ €λ‹(Versioning) **ν™μ„±ν™”**.
- **κΈ°λ³Έκ°’ μ•”νΈν™”** μ„¤μ •μ—μ„ **SSE-S3** μ„ νƒ.
    - SSE-S3: S3κ°€ μμ²΄μ μΌλ΅ κ΄€λ¦¬ν•λ” ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ μ•”νΈν™”.

### 2. κ°μ²΄ μ—…λ΅λ“ λ° μ•”νΈν™” ν™•μΈ

- `coffee.jpg` μ—…λ΅λ“.
- μ—…λ΅λ“ ν›„ κ°μ²΄μ **μ•”νΈν™” λ°©μ‹μ΄ SSE-S3**μ„μ„ ν™•μΈ.
- **μ•”νΈν™” λ°©μ‹ νΈμ§‘** μ‹, κ°μ²΄μ **μƒ λ²„μ „μ΄ μƒμ„±λ¨** (λ²„μ €λ‹μ΄ μΌμ Έ μμ–΄μ„).

### 3. μ•”νΈν™” λ°©μ‹ λ³€κ²½ μ‹¤μµ
- ν•΄λ‹Ή κ°μ²΄μ— λ€ν•΄ **κΈ°λ³Έκ°’ μ•”νΈν™” λ¬΄μ‹**.
- **SSE-KMS** μ„ νƒ:
    - KMS ν‚¤λ΅ μ•”νΈν™” (μ§μ ‘ ν‚¤ μ§€μ • κ°€λ¥).
    - **κΈ°λ³Έ ν‚¤(aws/s3)** μ‚¬μ© β†’ **μ¶”κ°€ λΉ„μ© μ—†μ**.        
    - **μ‚¬μ©μ μ •μ KMS ν‚¤** μƒμ„± μ‹ λ§¤μ›” λΉ„μ© λ°μƒ.
    
### 4. λ‹¤λ¥Έ νμΌ μ—…λ΅λ“
- λ‹¤λ¥Έ νμΌ `beach.jpg` μ—…λ΅λ“ μ‹ **μ•”νΈν™” μ„¤μ • μ¤λ²„λΌμ΄λ“λ„ κ°€λ¥**
	- SSE-S3, SSE-KMS, DSSE-KMS μ¤‘ μ„ νƒ κ°€λ¥.
- SSE-KMSλ¥Ό κΈ°λ³Έκ°’μΌλ΅ μ„¤μ • μ‹, **λ²„ν‚· ν‚¤ μµμ…** ν™μ„±ν™” κ°€λ¥:
    - **KMS νΈμ¶ μ κ°μ†**λ΅ **λΉ„μ© μ κ° ν¨κ³Ό**.
- SSE-S3 μ„ νƒ μ‹ ν•΄λ‹Ή μµμ… μ—†μ.
- **SSE-C**λ” μ½μ†”μ—μ„ μ„¤μ • λ¶κ°€ (CLIλ§ κ°€λ¥).
	- **ν΄λΌμ΄μ–ΈνΈ μΈ΅ μ•”νΈν™”**λ” S3κ°€ κ΄€μ—¬ν•μ§€ μ•μΌλ©°, μ‚¬μ©μκ°€ μ§μ ‘ μ•”νΈν™”/λ³µνΈν™” μ²λ¦¬ν•΄μ•Ό ν•¨.


---

## S3 κΈ°λ³Έ μ•”νΈν™”

- **κΈ°λ³Έκ°’ μ•”νΈν™”(Default Encryption)**:
    - ==λ¨λ“  S3 λ²„ν‚·μ€ κΈ°λ³Έμ μΌλ΅ **SSE-S3** μ•”νΈν™”κ°€ μ μ©λ¨.==
    - μ‚¬μ©μλ” μ΄λ¥Ό **SSE-KMS** λλ” **SSE-C**λ΅ λ³€κ²½ κ°€λ¥
    - μƒλ΅ μ—…λ΅λ“λλ” κ°μ²΄μ— μλ™μΌλ΅ μ μ©λ¨.
- **λ²„ν‚· μ •μ±…(Bucket Policy)**:
    - **μ•”νΈν™” κ°•μ  κ°€λ¥**.
    - μ: `PutObject` μ”μ²­μ— `aws:kms` λλ” `SSE-C` ν—¤λ”κ°€ μ—†μΌλ©΄ **μ”μ²­ κ±°λ¶€**.
    - **κ°μ²΄ μ—…λ΅λ“ μ‹ μ μ ν• μ•”νΈν™”κ°€ μ„¤μ •λμ—λ”μ§€ κ²€μ‚¬**ν•¨.
- **μ •λ¦¬**:
    - κΈ°λ³Έκ°’ μ•”νΈν™”λ” μλ™ μ μ©
    - λ²„ν‚· μ •μ±…μ€ **μ•”νΈν™” μ¤€μ μ—¬λ¶€λ¥Ό κ°•μ **ν•λ” μ©λ„.
    - ==**λ²„ν‚· μ •μ±…μ€ κΈ°λ³Έκ°’ μ•”νΈν™”λ³΄λ‹¤ μ°μ„ μ μΌλ΅ ν‰κ°€**λ¨.==
        

## S3 CORS

### κ°μ”
CORS (Cross-Origin Resource Sharing)
- **CORSλ€?**  
    μ›Ή λΈλΌμ°μ €μ **λ³΄μ• λ©”μ»¤λ‹μ¦**μΌλ΅, ν„μ¬ μ¤λ¦¬μ§„(Origin) μ™Έμ **λ‹¤λ¥Έ μ¤λ¦¬μ§„μ— λ€ν• μ”μ²­μ„ ν—μ©ν•κ±°λ‚ κ±°λ¶€**ν•  μ μλ„λ΅ **μ μ–΄**ν•λ” κΈ°λ¥.
    
- **μ¤λ¦¬μ§„μ΄λ€?**  
    `ν”„λ΅ν† μ½ + λ„λ©”μΈ + ν¬νΈ`μ μ΅°ν•©.  
    μ: `https://www.example.com:443`  
    μ΄ μ΅°ν•©μ΄ λ‹¤λ¥΄λ©΄ **λ‹¤λ¥Έ μ¤λ¦¬μ§„**μΌλ΅ κ°„μ£Όλ¨.
	 - μ) http://example.com/app1 μ΄λ‘ http://example.com/app2 λ‘μ€ κ°™μ€ μ¤λ¦¬μ§„
	 - μ) http://www.example.com μ΄λ‘ http://other.example/com μ€ λ‹¤λ¥Έ μ¤λ¦¬μ§„
	- μμ‹)
		- μ›Ή λΈλΌμ°μ €λ΅ ν• μ›Ήμ‚¬μ΄νΈλ¥Ό λ°©λ¬Έν•¨. 
		- μ”μ²­ μ¤‘μ— ν•λ‚κ°€ λ‹¤λ¥Έ μ›Ήμ‚¬μ΄νΈμ— μ”μ²­μ„ λ³΄λ‚΄μ•Όν•¨.
		- μ΄λ•, λ‹¤λ¥Έ μ¤λ¦¬μ§„μ΄ CORS ν—¤λ”λ¥Ό μ‚¬μ©ν•΄μ„ μ”μ²­μ„ ν—μ©ν•μ§€ μ•λ”ν•, ν•΄λ‹Ή μ”μ²­μ€ λ¶κ°€ν•¨
		- μ΄κ² `Access-Control-Allow-Origin`μ„
- **CORS μ‘λ™ λ°©μ‹**
    1. λΈλΌμ°μ €κ°€ λ‹¤λ¥Έ μ¤λ¦¬μ§„μ— μ”μ²­μ„ μ‹λ„ν•¨.
    2. λΈλΌμ°μ €λ” **μ‚¬μ „ μ”μ²­(preflight request)**μ„ μ „μ†΅ (OPTIONS μ”μ²­).
    3. λ€μƒ μ„λ²„κ°€ `Access-Control-Allow-Origin` ν—¤λ”λ΅ **μ”μ²­μ„ ν—μ©**ν•΄μ•Ό μ‹¤μ  μ”μ²­μ΄ κ°€λ¥.
    4. κ·Έλ ‡μ§€ μ•μΌλ©΄ μ”μ²­ **μ°¨λ‹¨**.
![[μ¤ν¬λ¦°μƒ· 2025-05-10 μ¤ν›„ 5.24.19.png]]
- **Amazon S3μ—μ„μ CORS μ μ©**
    - S3 λ²„ν‚·μ— μ •μ  μ›Ήμ‚¬μ΄νΈ νΈμ¤ν… μ„¤μ • μ‹, **κµμ°¨ μ¤λ¦¬μ§„ μ”μ²­μ„ ν—μ©ν•λ ¤λ©΄ CORS κ·μΉ™**μ„ μ„¤μ •ν•΄μ•Ό ν•¨.
    - μ: μ΄λ―Έμ§€ λ¦¬μ†μ¤κ°€ λ‹¤λ¥Έ λ²„ν‚·μ— μμ„ κ²½μ°, ν•΄λ‹Ή λ²„ν‚·μ— CORS ν—μ© μ„¤μ •μ΄ μ—†μΌλ©΄ **μ΄λ―Έμ§€ λ΅λ“ μ‹¤ν¨**.
        
- **μ‹ν— ν¬μΈνΈ**
    - `Access-Control-Allow-Origin` ν—¤λ”μ μ—­ν• .
    - `*`(μ™€μΌλ“μΉ΄λ“)μ„ μ‚¬μ©ν•μ—¬ λ¨λ“  μ¤λ¦¬μ§„ ν—μ© κ°€λ¥.
    - **λΈλΌμ°μ € κΈ°λ° μ”μ²­**λ§ CORS μν–¥μ„ λ°›μ (μ„λ²„-μ„λ²„λ” ν•΄λ‹Ή μ—†μ).
        


### μ‹¤μµ

-  μ‹¤μµ λ©ν‘
	- **κ°™μ€ μ¤λ¦¬μ§„μ—μ„λ” fetchκ°€ μ •μƒ μ‘λ™**ν•λ” κ²ƒμ„ ν™•μΈν•κ³ ,
	- **λ‹¤λ¥Έ μ¤λ¦¬μ§„μ—μ„ fetch μ”μ²­ μ‹ CORS μ—λ¬ λ°μƒ**, μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ CORS μ„¤μ •μ„ μ¶”κ°€ν•©λ‹λ‹¤.
    

-  μ‹¤μµ μ μ°¨
	1. **`index.html` νμΌ μμ •**
	    - μ£Όμ„ μ²λ¦¬λ HTMLκ³Ό JavaScript μ½”λ“λ¥Ό ν™μ„±ν™”.
	    - `fetch`λ΅ `extra-page.html`μ„ λ¶λ¬μ¤κ³ , μ΄λ―Έμ§€ μ•„λμ— ν‘μ‹.
	2. **κ°™μ€ μ¤λ¦¬μ§„ λ‚΄ ν…μ¤νΈ**
	    - κ°™μ€ S3 λ²„ν‚·μ— `index.html`κ³Ό `extra-page.html` μ—…λ΅λ“.
	    - μ›Ή λΈλΌμ°μ €μ—μ„ λ‘ νμΌ μ •μƒ ν‘μ‹λ¨ (`fetch` μ„±κ³µ).
	3. **λ‹¤λ¥Έ μ¤λ¦¬μ§„μ—μ„ fetch μ”μ²­ μ‹λ„**
	    - μƒλ΅μ΄ S3 λ²„ν‚· μƒμ„± (λ¦¬μ „ λ‹¤λ¥΄κ² μ„¤μ •ν•μ—¬ λ‹¤λ¥Έ μ¤λ¦¬μ§„μΌλ΅ μΈμ‹).
	    - μ΄ λ²„ν‚·μ—λ„ `extra-page.html` μ—…λ΅λ“.
	    - κΈ°μ΅΄ `index.html`μ—μ„ `fetch` URLμ„ μƒ λ²„ν‚·μ κ²½λ΅λ΅ μμ •.
	4. **CORS μ—λ¬ λ°μƒ ν™•μΈ**
	    - λΈλΌμ°μ € κ°λ°μ λ„κµ¬ μ½μ†”μ—μ„ "CORS ν—¤λ” λ„λ½" μ¤λ¥ ν™•μΈ.
	5. **CORS μ„¤μ • μ¶”κ°€**
	    - μƒ λ²„ν‚·μ Permissions > CORS configurationμ— JSON μ„¤μ • μ¶”κ°€.
	    - `AllowedOrigins`μ— μ›λ λ²„ν‚·μ URL μ…λ ¥.
	6. **CORS μ„±κ³µ ν™•μΈ**
	    - μ›Ή νμ΄μ§€ μƒλ΅κ³ μΉ¨ μ‹ μ¤λ¥ μ—†μ΄ λ‹¤λ¥Έ λ²„ν‚·μ HTML λ‚΄μ© μ •μƒ ν‘μ‹.
	    - λ„¤νΈμ›ν¬ νƒ­μ—μ„ μ‘λ‹µ ν—¤λ”μ— CORS κ΄€λ ¨ ν•„λ“ μ΅΄μ¬ ν™•μΈ (`Access-Control-Allow-Origin`, `Access-Control-Allow-Methods` λ“±).
        
>- κ²°λ΅  
	- κ°™μ€ μ¤λ¦¬μ§„μ—μ„λ” `fetch`κ°€ κΈ°λ³Έμ μΌλ΅ μ‘λ™ν•¨.
	- λ‹¤λ¥Έ μ¤λ¦¬μ§„μ—μ„ μ”μ²­ν•λ ¤λ©΄ **CORS μ„¤μ •μ„ λ…μ‹μ μΌλ΅ μ¶”κ°€ν•΄μ•Ό** ν•¨.
	- μ‹ν—μ— μμ£Ό λ“±μ¥ν•λ―€λ΅ μ‹¤μµμ„ ν†µν•΄ μ΄ν•΄ν•΄ λ‘λ” κ²ƒμ΄ μΆ‹μ.
	    


## S3 MFA Delete

### κ°μ”
- **MFA(Multi-Factor Authentication)**: Google Authenticator κ°™μ€ μ•±μ΄λ‚ MFA ν•λ“μ›¨μ–΄ μ¥μΉλ¥Ό ν†µν•΄ μƒμ„±λ μ½”λ“λ¥Ό μ…λ ¥ν•΄μ•Ό μ¤‘μ”ν• μ‘μ—…μ„ μν–‰ν•  μ μλ„λ΅ ν•λ” λ³΄μ• κΈ°λ¥μ…λ‹λ‹¤.
    ![[Pasted image 20250507202430.png]]
- **μ‚¬μ© λ©μ **:
    - κ°μ²΄ λ²„μ „μ **μκµ¬ μ‚­μ ** μ‹
    - λ²„ν‚·μ—μ„ **λ²„μ €λ‹ μ¤‘λ‹¨** μ‹  
        μ„μ™€ κ°™μ€ **νκ΄΄μ μΈ μ‘μ—…**μ— λ€ν•΄ μ¶”κ°€ λ³΄νΈλ¥Ό μ κ³µν•©λ‹λ‹¤.
        
- **λ¶ν•„μ”ν• κ²½μ°**: λ²„μ €λ‹ ν™μ„±ν™”, μ‚­μ λ λ²„μ „ λ‚μ—΄ λ“±μ€ μ„ν—λ„κ°€ λ‚®μ•„ MFAκ°€ ν•„μ” μ—†μµλ‹λ‹¤.
    
- MFA delete μ‚¬μ©**μ΅°κ±΄**:
    - **λ²„μ €λ‹μ΄ ν™μ„±ν™”λ λ²„ν‚·**μ—μ„λ§ μ‚¬μ© κ°€λ¥
    - **λ£¨νΈ κ³„μ •λ§** MFA Delete μ„¤μ • κ°€λ¥
        
- **ν•μ¤„ μ •λ¦¬**: ==μ‹¤μλ΅ μΈν• λ°μ΄ν„° μ†μ‹¤μ„ λ§‰λ” **κ°•λ ¥ν• λ³΄νΈ μλ‹¨**==
    



## S3 μ—‘μ„Έμ¤ λ΅κ·Έ 
### κ°μ”
- **μ •μ**: S3 λ²„ν‚·μ— λ€ν• **λ¨λ“  μ”μ²­(μ„±κ³µ/μ‹¤ν¨ ν¬ν•¨)** μ„ κΈ°λ΅ν•λ” κΈ°λ¥
- **μ©λ„**: λ³΄μ• λ° **κ°μ‚¬ μ¶”μ **μ„ μ„ν•΄ μ‚¬μ©λλ©°, Amazon Athena κ°™μ€ λ„κµ¬λ΅ λ¶„μ„ν•  μ μμ
- **λ΅κ·Έ μ €μ¥ μ„μΉ**: λ΅κ·Έλ” **λ‹¤λ¥Έ S3 λ²„ν‚·**μ— μ €μ¥λλ©°, ν•΄λ‹Ή **λ΅κΉ… λ²„ν‚·μ€ κ°™μ€ AWS λ¦¬μ „μ— μμ–΄μ•Ό** ν•¨
        
- **μ‘λ™ λ°©μ‹**:
    - S3 λ²„ν‚· μ„¤μ •μ—μ„ **μ•΅μ„Έμ¤ λ΅κ·Έ ν™μ„±ν™”**
    - μ΄ν›„ λ¨λ“  μ”μ²­ μ •λ³΄κ°€ λ΅κ·Έ νμΌλ΅ κΈ°λ΅λ¨
        
- **μ°Έκ³ **: λ΅κ·Έ ν•μ‹μ€ AWS κ³µμ‹ λ¬Έμ„μ—μ„ ν™•μΈ κ°€λ¥ 
	- https://docs.aws.amazon.com/AmazonS3/latest/dev/LogFormat.html
- **μ£Όμμ‚¬ν•­**:
    - ==**λ΅κΉ… λ²„ν‚·κ³Ό μ†μ¤ λ²„ν‚·μ΄ κ°™μΌλ©΄ μ• λ¨!**==  never ever set!!!
        β†’ κ·Έλ ‡μ§€ μ•μΌλ©΄ **λ΅κΉ… λ£¨ν”„** λ°μƒ β†’ λ΅κ·Έκ°€ κ³„μ† μƒμ„±λ¨ β†’ **λΉ„μ© ν­μ¦**
	![[μ¤ν¬λ¦°μƒ· 2025-05-10 μ¤ν›„ 5.50.50.png]]
### μ‹¤μµ
1. **λ΅κΉ… λ²„ν‚· μƒμ„±**
    - μ΄λ¦„: `s3-access-logs-stephane-v3`
    - μ΄ λ²„ν‚·μ€ **λ΅κ·Έ μ €μ¥μ© λ²„ν‚·**μΌλ΅ μ‚¬μ©λ¨
        
2. **λ΅κΉ… ν™μ„±ν™” λ€μƒ λ²„ν‚· μ„ νƒ**
    - S3 μ½μ†”μ—μ„ μ›ν•λ” λ²„ν‚· μ„ νƒ
    - **[μ†μ„±(Properties)] β†’ [μ„λ²„ μ•΅μ„Έμ¤ λ΅κΉ…]μΌλ΅ μ΄λ™**
    - **νΈμ§‘ β†’ λ΅κΉ… ν™μ„±ν™”**
        
3. **λ΅κΉ… μ„¤μ •**
    - **λ©μ μ§€ λ²„ν‚·**: `s3-access-logs-stephane-v3`
    - **μ§€μ—­**: `eu-west-1`
    - **μ ‘λ‘μ‚¬(Prefix)**: μƒλµ κ°€λ¥
    - **λ΅κ·Έ ν‚¤ ν•μ‹**: κΈ°λ³Έκ°’ μ‚¬μ©
        
4. **λ²„ν‚· μ •μ±…μ€ μλ™μΌλ΅ μ—…λ°μ΄νΈλ¨**
    
5. **μ΄λ²¤νΈ λ°μƒν•΄μ„ λ΅κΉ…λλ”μ§€ ν™•μΈ**
    - μμ‹: `beach.jpg` κ°™μ€ νμΌ μ—…λ΅λ“λ΅ S3 ν™λ™ λ°μƒ
    - λ΅κ·Έλ” **λ‡ λ¶„~λ‡ μ‹κ°„ ν›„μ— μƒμ„±**
    - λ΅κΉ… λ²„ν‚· λ‚΄ κ°μ²΄ ν™•μΈ κ°€λ¥
    - κ° λ΅κ·Έ νμΌμ—λ” **μ”μ²­ μ‹κ°„, API νΈμ¶, μ”μ²­μ, μ„±κ³µ/μ‹¤ν¨ μ—¬λ¶€ λ“±**μ΄ ν¬ν•¨λ¨
        
6. **κ²°λ΅ **
    - S3 μ•΅μ„Έμ¤ λ΅κ·Έλ¥Ό ν†µν•΄ **λ³΄μ• κ°μ‚¬ λ° ν™λ™ μ¶”μ  κ°€λ¥**
    - λ¶„μ„ λ„κµ¬μ™€ ν•¨κ» μ‚¬μ©ν•λ©΄ μ μ©ν•¨



---

## S3 μ‚¬μ „ μ„λ…λ URLΒ (pre-signed URLs)


![[μ¤ν¬λ¦°μƒ· 2025-05-10 μ¤ν›„ 9.03.55.png]]
1. S3 κ°μ²΄μ— λ€ν• μ„μ‹ μ ‘κ·Ό κ¶ν•μ„ λ¶€μ—¬ν•λ” URL
	- S3 μ½μ†”, CLI, SDKλ¥Ό ν†µν•΄ μƒμ„± κ°€λ¥

2. **λ§λ£ μ‹κ°„**
    - **S3 μ½μ†”**: μµλ€ **12μ‹κ°„**
    - **CLI**: μµλ€ **168μ‹κ°„ (7μΌ)**
    
3. **κ¶ν• μƒμ†**
    - URLμ„ μƒμ„±ν• **μ‚¬μ©μμ κ¶ν•(μ: GET, PUT)**μ„ **URL μ‚¬μ©μκ°€ κ·Έλ€λ΅ μ‚¬μ©**        
    - URL μμ²΄κ°€ λ―Έλ¦¬ μ„λ…λ κ²ƒμ΄κΈ° λ•λ¬Έ

4. **λ€ν‘μ μΈ μ‚¬μ© μ‚¬λ΅€**
    - **ν”„λΌμ΄λΉ— λ²„ν‚·**μ κ°μ²΄λ¥Ό μ™Έλ¶€ μ‚¬μ©μμ—κ² **μΌμ‹μ μΌλ΅ κ³µμ **
    - **ν”„λ¦¬λ―Έμ—„ μ½ν…μΈ  λ‹¤μ΄λ΅λ“** ν—μ© (μ: μ λ£ μ‚¬μ©μ)
    - **μ„μ‹ μ—…λ΅λ“ ν—μ©**: μ™Έλ¶€ μ‚¬μ©μκ°€ S3μ— νμΌ μ—…λ΅λ“ (PUT) κ°€λ¥
    - **λ³΄μ• μ μ§€**: λ²„ν‚·μ€ λΉ„κ³µκ° μƒνƒ μ μ§€, κ³µκ°λ΅ μ„¤μ •ν•  ν•„μ” μ—†μ
        
5. **μ‘λ™ λ°©μ‹**
    - λ―Έλ¦¬ μ„λ…λ URLμ—λ” μ”μ²­μ— ν•„μ”ν• **μκ²© μ¦λ…, μ”μ²­ λ°©λ²•, λ§λ£ μ‹κ°„ λ“±μ΄ ν¬ν•¨λ¨**
    - μ§€μ •λ μ‹κ°„ λ‚΄μ—λ§ μ‚¬μ© κ°€λ¥, λ§λ£ ν›„μ—λ” **μ•΅μ„Έμ¤ λ¶κ°€**
        
6. **μ¥μ **
    - **URL λ§λ£μ‹κ°„μ„ μ •ν•¨μΌλ΅μ¨ λ³΄μ•μ„± μ μ§€ + μ μ—°ν• κ³µμ ** κ°€λ¥
    - **μ •λ°€ν• μ μ–΄**: μ–΄λ–¤ νμΌ, μ–΄λ–¤ λ™μ‘(GET/PUT), μ–Όλ§λ‚ μ¤λ«λ™μ•

---

## S3 μ κΈ μ •μ±… λ° Glacier Vault Lock (λ³ΌνΈ μ κΈ)
###  **S3 Glacier λ³ΌνΈ μ κΈ**
- μ¤ν† λ¦¬μ§€ ν΄λμ¤ μ¤‘ Glacierμ μµμ… μ¤‘ ν•λ‚
- **λ©μ **: WORM(Write Once, Read Many) λ¨λΈ κµ¬ν„
- **νΉμ§•**
    - **λ³ΌνΈ μ κΈ μ •μ±…**μ„ μ„¤μ •ν•κ³  **μ κ·Έλ©΄ λ³€κ²½/μ‚­μ  λ¶κ°€**
    - μΌλ‹¨ μ κΈ°λ©΄ **κ΄€λ¦¬μ λ° AWS μ„λΉ„μ¤μ΅°μ°¨ μμ •/μ‚­μ  λ¶κ°€**
    - **κ·μ • μ¤€μ λ° μ¥κΈ° λ³΄μ΅΄**μ— μ ν•©
    - λ‹¨μν•κ³  κ°•λ ¥ν• λ³΄μ• μµμ…


### **S3 κ°μ²΄ μ κΈ**
- **μ „μ  μ΅°κ±΄**: λ²„ν‚·μ **λ²„μ €λ‹ ν™μ„±ν™”** ν•„μ”
- **λ€μƒ**: λ²„ν‚· λ‹¨μ„κ°€ μ•„λ‹λΌ κ°λ³„ κ°μ²΄ λ‹¨μ„λ΅ WORM μ μ© κ°€λ¥
- νΉμ • κ°μ²΄λ¥Ό νΉμ • μ‹κ°„ λ™μ• μ‚­μ λλ”κ±Έ μ°¨λ‹¨ ν•  μ μμ 
- **λ³΄μ΅΄ λ¨λ“
    1. **κ·μ • μ¤€μ λ¨λ“ (Compliance Mode)**
	    -  **S3 Glacier λ³ΌνΈ μ κΈ**μ΄λ‘ λΉ„μ·
        - λ„κµ¬λ„ μ‚­μ λ‚ μμ • λ¶κ°€
        - λ³΄μ΅΄ κΈ°κ°„ λ³€κ²½ λ¶κ°€ β†’ κ°€μ¥ **μ—„κ²©**
    2. **κ±°λ²„λ„μ¤ λ¨λ“ (Governance Mode)**
        - μΌλ° μ‚¬μ©μλ” μμ •/μ‚­μ  λ¶κ°€
        - **κ΄€λ¦¬μ κ¶ν•**μ΄ μμΌλ©΄ λ³€κ²½ κ°€λ¥
        - λ” **μ μ—°ν• μ μ–΄** κ°€λ¥
	- **λ³΄μ΅΄ κΈ°κ°„ μ„¤μ • ν•„μ** (λ‹¨, μ—°μ¥μ€ κ°€λ¥)
    
- **λ²•μ  λ³΄μ΅΄ (Legal Hold)**
    - **λ³΄μ΅΄ κΈ°κ°„ λ¬΄κ΄€**ν•κ² λ²„ν‚· λ‚΄ κ°μ²΄λ¥Ό λ¬΄κΈ°ν• λ³΄νΈ
    - `s3:PutObjectLegalHold` κ¶ν• ν•„μ”
    - λ²•μ  μ΅°μ‚¬ λ“± νΉλ³„ν• μ•„μ£Ό μ¤‘μ”ν• μƒν™©μ—μ„ μ‚¬μ©


### π“ μ‹ν— λ€λΉ„ ν•µμ‹¬ μ •λ¦¬

| κµ¬λ¶„       | κ·μ • μ¤€μ λ¨λ“ | κ±°λ²„λ„μ¤ λ¨λ“  | λ²•μ  λ³΄μ΅΄         |
| -------- | -------- | -------- | ------------- |
| μ‚­μ  κ°€λ¥ μ—¬λ¶€ | μ λ€ λ¶κ°€    | κ΄€λ¦¬μλ§ κ°€λ¥  | λ¬΄κΈ°ν• λ³΄νΈ        |
| λ³΄μ΅΄ κΈ°κ°„ λ³€κ²½ | λ¶κ°€       | κ΄€λ¦¬μλ§ κ°€λ¥  | λ¬΄κ΄€            |
| μ‚¬μ© μ     | λ²•μ  κ·μ  μ¤€μ | μΌλ° μ΅°μ§ λ³΄μ• | μ¬ν λ“± λ²•μ  μ΄μ λ€μ‘ |


  ---

## S3 μ—‘μ„Έμ¤ ν¬μΈνΈ

ν•λ‚μ S3 λ²„ν‚·μ— λ€ν•΄ λ‹¤μ–‘ν• μ‚¬μ©μλ‚ μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μ„λ΅ λ‹¤λ¥Έ λ°©μ‹μΌλ΅ μ ‘κ·Όν•  μ μλ„λ΅ 
λ³΄μ•μ„ μ„Έλ¶„ν™”ν•κ³  μ‰½κ² κ΄€λ¦¬ν•  μ μκ² ν•΄μ£Όλ” κΈ°λ¥

![[μ¤ν¬λ¦°μƒ· 2025-05-10 μ¤ν›„ 9.17.16.png]]
- μλ¥Ό λ“¤μ–΄, `/finance`, `/sales` κ°™μ€ μ ‘λ‘μ–΄μ— λ”°λΌ κ°κ° **Finance**, **Sales**, **Analytics** μ•΅μ„Έμ¤ ν¬μΈνΈλ¥Ό λ§λ“¤ μ μμΌλ©°, κ° μ—‘μ„Έμ¤ ν¬μΈνΈλ” κ³ μ ν• μ •μ±…μ„ ν†µν•΄ νΉμ • λ°μ΄ν„°μ— λ€ν• **μ½κΈ°/μ“°κΈ° κ¶ν•**μ„ κ΄€λ¦¬ν•  μ μμµλ‹λ‹¤.
- μ•΅μ„Έμ¤ ν¬μΈνΈλ” **S3 λ²„ν‚· μ •μ±…**κ³Ό λ³„λ„λ΅ μ΅΄μ¬ν•λ©°, **IAM κ¶ν•**κ³Ό ν•¨κ» μ‚¬μ©λμ–΄ **λ³΄μ• κ΄€λ¦¬μ λ‹¨μν™”μ™€ ν™•μ¥μ„±**μ„ μ κ³µν•©λ‹λ‹¤.
- μ•΅μ„Έμ¤ ν¬μΈνΈλ” κ³ μ μ **DNS μ΄λ¦„**μ„ κ°€μ§€λ©°, μ΄λ¥Ό ν†µν•΄ μ• ν”λ¦¬μΌ€μ΄μ…μ΄ S3 λ²„ν‚·μ— μ—°κ²°λ©λ‹λ‹¤.
    





----
## S3 μ¤λΈμ νΈ λλ‹¤
- **S3 μ•΅μ„Έμ¤ ν¬μΈνΈμ ν™μ©
	- S3 κ°μ²΄λ¥Ό κ°€μ Έμ¤κΈ° μ§μ „μ— μμ •**ν•  μ μλ„λ΅ ν•΄μ¤λ‹λ‹¤.
![[μ¤ν¬λ¦°μƒ· 2025-05-10 μ¤ν›„ 9.23.29.png]]
μλ¥Ό λ“¤μ–΄
- **λ¶„μ„κΈ° μ• ν”λ¦¬μΌ€μ΄μ…**μ€ μ›λ³Έ κ°μ²΄μ—μ„ PII λ°μ΄ν„°λ¥Ό μ κ±°ν• λ²„μ „μ„ μ›ν•  μ μκ³ ,
- **λ§μΌ€ν… μ• ν”λ¦¬μΌ€μ΄μ…**μ€ κ³ κ° λ°μ΄ν„°κ°€ **λ³΄κ°•λ κ°μ²΄**λ¥Ό μ›ν•  μ μμµλ‹λ‹¤.
    

μ΄λ΄ λ•, κ° μ• ν”λ¦¬μΌ€μ΄μ…λ§λ‹¤ S3 λ²„ν‚·μ„ μƒλ΅ λ§λ“¤ ν•„μ” μ—†μ΄:
1. **S3 μ•΅μ„Έμ¤ ν¬μΈνΈμ— μ•΅μ„Έμ¤
2. λλ‹¤ ν•¨μ νΈμ¶
3. λλ‹¤ν•¨μκ°€ μ”μ²­ μ‹μ μ— κ°μ²΄λ¥Ό μμ •/μ‚­μ ν•κ±°λ‚ λ³€ν™(μ: PII μ κ±°, JSON λ³€ν™, μ›ν„°λ§ν¬ μ‚½μ…)
    
κ²°κ³Όμ μΌλ΅ ν•λ‚μ S3 λ²„ν‚·μΌλ΅ λ‹¤μ–‘ν• μ• ν”λ¦¬μΌ€μ΄μ… μ”κµ¬μ— λ§λ” **λ§μ¶¤ν• κ°μ²΄ μ‘λ‹µ**μ„ μ κ³µν•  μ μκ² λ©λ‹λ‹¤.

ν™μ© μ‚¬λ΅€:
- λ―Όκ° μ •λ³΄ μ κ±° (PII)
- λ°μ΄ν„° ν¬λ§· λ³€ν™ (XML β†’ JSON)
- μ΄λ―Έμ§€ λ¦¬μ‚¬μ΄μ§• λλ” μ›ν„°λ§ν¬ μ‚½μ…
    
